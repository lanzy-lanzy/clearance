{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto px-4 py-8">
	<div class="bg-white rounded-lg shadow-lg overflow-hidden">
		<!-- Header -->
		<div class="bg-blue-600 px-6 py-4">
			<h3 class="text-2xl font-bold text-white">Generate Reports</h3>
		</div>

		<!-- Content -->
		<div class="p-6">
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				<!-- Generate PDF Card -->
				<div class="bg-white rounded-lg shadow-md">
					<div class="p-6">
						<h5 class="text-xl font-semibold mb-3">Generate PDF Report</h5>
						<p class="text-gray-600 mb-4">Generate a comprehensive PDF report of all clearance requests and their statuses.</p>
						<a href="{% url 'generate_report' %}" 
						   class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
							<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
								<path d="M7 3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V13C17 13.5523 16.5523 14 16 14H8C7.44772 14 7 13.5523 7 13V3ZM9 4V12H15V4H9Z"/>
								<path d="M3 7C3 6.44772 3.44772 6 4 6H5V14C5 15.6569 6.34315 17 8 17H16V18C16 18.5523 15.5523 19 15 19H4C3.44772 19 3 18.5523 3 18V7Z"/>
							</svg>
							Generate PDF
						</a>
					</div>
				</div>

				<!-- Report Summary Card -->
				<div class="bg-white rounded-lg shadow-md">
					<div class="p-6">
						<h5 class="text-xl font-semibold mb-4">Report Summary</h5>
						<div class="space-y-3">
							{% if user.staff %}
								<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
									<span class="text-gray-700">Pending Requests</span>
									<span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm">
										{{ clearance_requests.pending_count }}
									</span>
								</div>
								<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
									<span class="text-gray-700">Approved Requests</span>
									<span class="bg-green-600 text-white px-3 py-1 rounded-full text-sm">
										{{ clearance_requests.approved_count }}
									</span>
								</div>
							{% elif user.programchair %}
								<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
									<span class="text-gray-700">Total Students</span>
									<span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm">
										{{ total_students }}
									</span>
								</div>
								<div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
									<span class="text-gray-700">Cleared Students</span>
									<span class="bg-green-600 text-white px-3 py-1 rounded-full text-sm">
										{{ cleared_students }}
									</span>
								</div>
							{% endif %}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}